<script>
async function fetchAQData() {
  try {
    const proxyUrl = "https://api.codetabs.com/v1/proxy?quest=";
    const targetUrl = "https://api.openaq.org/v1/latest?city=Delhi";
    const response = await fetch(proxyUrl + encodeURIComponent(targetUrl));
    const data = await response.json();

    if (!data.results || data.results.length === 0) {
      document.getElementById("dataBox").innerText = "No data available";
      return;
    }

    const station = data.results[0];
    const measurements = station.measurements;

    let text = "Delhi AQI Data:\n";
    measurements.forEach(m => {
      text += m.parameter.toUpperCase() + ": " + m.value + " " + m.unit + "\n";
    });

    document.getElementById("dataBox").innerText = text;
  } catch (err) {
    console.error(err);
    document.getElementById("dataBox").innerText = "Error loading data";
  }
}

fetchAQData();
</script>
